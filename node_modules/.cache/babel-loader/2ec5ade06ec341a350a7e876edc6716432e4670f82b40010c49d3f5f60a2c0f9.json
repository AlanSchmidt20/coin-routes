{"ast":null,"code":"var _jsxFileName = \"/Users/alanschmidt/Work/coin-routes/src/components/OrderBook/OrderBook.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { TableCell, TableContainer, TableHead, TableRow, Table, TableBody } from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport \"./OrderBook.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderBook = _ref => {\n  _s();\n  let {\n    coin\n  } = _ref;\n  const [bids, setBids] = useState([]);\n  const [asks, setAsks] = useState([]);\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [coin],\n      channels: [\"level2_batch\"]\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = event => {\n      var _response$changes;\n      const response = JSON.parse(event.data);\n      response === null || response === void 0 ? void 0 : (_response$changes = response.changes) === null || _response$changes === void 0 ? void 0 : _response$changes.map(change => {\n        change[0] === \"buy\" ? setBids([...bids.slice(0, 5), {\n          price: change[1],\n          size: change[2]\n        }]) : setAsks([...asks.slice(0, 5), {\n          price: change[1],\n          size: change[2]\n        }]);\n        /*         const filtered = bids.filter((bid) => bid.size < 0);\n        console.log(filtered); */\n        let value = 0;\n        change = change.filter(item => item !== value);\n        console.log(bids.size);\n      });\n    };\n    ws.onclose = () => {\n      ws.close();\n    };\n    return () => {\n      ws.close();\n    };\n  }, [bids, asks]);\n  useEffect(() => {\n    setBids([]);\n    setAsks([]);\n  }, [coin]);\n  return /*#__PURE__*/_jsxDEV(TableContainer, {\n    component: Paper,\n    className: \"table--parent\",\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      sx: {\n        minWidth: 300,\n        width: 100\n      },\n      \"aria-label\": \"simple table\",\n      className: \"table--child\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: \"Price (USD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: \"Market Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: bids === null || bids === void 0 ? void 0 : bids.map((bid, index) => {\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            sx: {\n              \"&:last-child td, &:last-child th\": {\n                border: 0\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                color: \"error.main\"\n              },\n              align: \"center\",\n              children: bid.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: bid.size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      sx: {\n        minWidth: 300,\n        width: 100\n      },\n      \"aria-label\": \"simple table\",\n      className: \"table--child\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: \"Price (USD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"center\",\n            children: \"Market Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: asks === null || asks === void 0 ? void 0 : asks.map((asks, index) => {\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            sx: {\n              \"&:last-child td, &:last-child th\": {\n                border: 0\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                color: \"success.main\"\n              },\n              align: \"center\",\n              children: asks.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: asks.size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderBook, \"j4jN73F057JogYLjcSoe8+6ZDyU=\");\n_c = OrderBook;\nexport default OrderBook;\nvar _c;\n$RefreshReg$(_c, \"OrderBook\");","map":{"version":3,"names":["React","useState","useEffect","TableCell","TableContainer","TableHead","TableRow","Table","TableBody","Paper","OrderBook","coin","bids","setBids","asks","setAsks","subscribe","type","product_ids","channels","ws","WebSocket","onopen","send","JSON","stringify","onmessage","event","response","parse","data","changes","map","change","slice","price","size","value","filter","item","console","log","onclose","close","minWidth","width","bid","index","border","color"],"sources":["/Users/alanschmidt/Work/coin-routes/src/components/OrderBook/OrderBook.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Table,\n  TableBody,\n} from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport \"./OrderBook.css\";\n\nconst OrderBook = ({ coin }) => {\n  const [bids, setBids] = useState([]);\n  const [asks, setAsks] = useState([]);\n\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [coin],\n      channels: [\"level2_batch\"],\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = (event) => {\n      const response = JSON.parse(event.data);\n\n      response?.changes?.map((change) => {\n        change[0] === \"buy\"\n          ? setBids([\n              ...bids.slice(0, 5),\n              { price: change[1], size: change[2] },\n            ])\n          : setAsks([\n              ...asks.slice(0, 5),\n              { price: change[1], size: change[2] },\n            ]);\n        /*         const filtered = bids.filter((bid) => bid.size < 0);\n        console.log(filtered); */\n        let value = 0;\n        change = change.filter((item) => item !== value);\n        console.log(bids.size);\n      });\n    };\n    ws.onclose = () => {\n      ws.close();\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [bids, asks]);\n\n  useEffect(() => {\n    setBids([]);\n    setAsks([]);\n  }, [coin]);\n\n  return (\n    <TableContainer component={Paper} className=\"table--parent\">\n      <Table\n        sx={{ minWidth: 300, width: 100 }}\n        aria-label=\"simple table\"\n        className=\"table--child\"\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\">Price (USD)</TableCell>\n            <TableCell align=\"center\">Market Size</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {bids?.map((bid, index) => {\n            return (\n              <TableRow\n                key={index}\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n              >\n                <TableCell sx={{ color: \"error.main\" }} align=\"center\">\n                  {bid.price}\n                </TableCell>\n                <TableCell align=\"center\">{bid.size}</TableCell>\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Table\n        sx={{ minWidth: 300, width: 100 }}\n        aria-label=\"simple table\"\n        className=\"table--child\"\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\">Price (USD)</TableCell>\n            <TableCell align=\"center\">Market Size</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {asks?.map((asks, index) => {\n            return (\n              <TableRow\n                key={index}\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n              >\n                <TableCell sx={{ color: \"success.main\" }} align=\"center\">\n                  {asks.price}\n                </TableCell>\n                <TableCell align=\"center\">{asks.size}</TableCell>\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default OrderBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}