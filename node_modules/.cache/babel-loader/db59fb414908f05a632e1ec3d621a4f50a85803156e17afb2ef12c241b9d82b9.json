{"ast":null,"code":"var _jsxFileName = \"/Users/alanschmidt/Work/coin-routes/src/components/CoinChart/CoinChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, Legend } from \"recharts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CoinChart = () => {\n  _s();\n  const [priceData, setPriceData] = useState([]);\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [\"BTC-USD\"],\n      channels: [\"level2\"]\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = event => {\n      var _response$changes;\n      const response = JSON.parse(event.data);\n      response === null || response === void 0 ? void 0 : (_response$changes = response.changes) === null || _response$changes === void 0 ? void 0 : _response$changes.map(change => setPriceData([...priceData, {\n        [change[0]]: change[1],\n        size: change[2]\n      }]));\n    };\n    ws.onclose = () => {\n      ws.close();\n    };\n    return () => {\n      ws.close();\n    };\n  }, [priceData]);\n  return /*#__PURE__*/_jsxDEV(LineChart, {\n    width: 500,\n    height: 300,\n    data: priceData,\n    margin: {\n      top: 5,\n      right: 10,\n      left: 60,\n      bottom: 5\n    },\n    children: [/*#__PURE__*/_jsxDEV(XAxis, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n      type: \"number\",\n      domain: [\"dataMin\", \"dataMax\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      dot: false,\n      connectNulls: true,\n      type: \"monotone\",\n      dataKey: \"buy\",\n      stroke: \"#82ca9d\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      dot: false,\n      connectNulls: true,\n      type: \"monotone\",\n      dataKey: \"sell\",\n      stroke: \"#8884d8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n_s(CoinChart, \"NZesrjWwPcELzI9+evv+KjnUEPU=\");\n_c = CoinChart;\nexport default CoinChart;\nvar _c;\n$RefreshReg$(_c, \"CoinChart\");","map":{"version":3,"names":["React","useState","useEffect","LineChart","Line","XAxis","YAxis","Tooltip","Legend","CoinChart","priceData","setPriceData","subscribe","type","product_ids","channels","ws","WebSocket","onopen","send","JSON","stringify","onmessage","event","response","parse","data","changes","map","change","size","onclose","close","top","right","left","bottom"],"sources":["/Users/alanschmidt/Work/coin-routes/src/components/CoinChart/CoinChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, Legend } from \"recharts\";\n\nconst CoinChart = () => {\n  const [priceData, setPriceData] = useState([]);\n\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [\"BTC-USD\"],\n      channels: [\"level2\"],\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = (event) => {\n      const response = JSON.parse(event.data);\n      response?.changes?.map((change) =>\n        setPriceData([\n          ...priceData,\n          { [change[0]]: change[1], size: change[2] },\n        ])\n      );\n    };\n    ws.onclose = () => {\n      ws.close();\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [priceData]);\n\n  return (\n    <LineChart\n      width={500}\n      height={300}\n      data={priceData}\n      margin={{\n        top: 5,\n        right: 10,\n        left: 60,\n        bottom: 5,\n      }}\n    >\n      <XAxis />\n      <YAxis type=\"number\" domain={[\"dataMin\", \"dataMax\"]} />\n      <Tooltip />\n      <Legend />\n      <Line\n        dot={false}\n        connectNulls\n        type=\"monotone\"\n        dataKey=\"buy\"\n        stroke=\"#82ca9d\"\n      />\n      <Line\n        dot={false}\n        connectNulls\n        type=\"monotone\"\n        dataKey=\"sell\"\n        stroke=\"#8884d8\"\n      />\n    </LineChart>\n  );\n};\n\nexport default CoinChart;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,QAAQ,UAAU;AAAC;AAE1E,MAAMC,SAAS,GAAG,MAAM;EAAA;EACtB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAE9CC,SAAS,CAAC,MAAM;IACd,MAAMU,SAAS,GAAG;MAChBC,IAAI,EAAE,WAAW;MACjBC,WAAW,EAAE,CAAC,SAAS,CAAC;MACxBC,QAAQ,EAAE,CAAC,QAAQ;IACrB,CAAC;IACD,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,qCAAqC,CAAC;IAE/DD,EAAE,CAACE,MAAM,GAAG,MAAM;MAChBF,EAAE,CAACG,IAAI,CAACC,IAAI,CAACC,SAAS,CAACT,SAAS,CAAC,CAAC;IACpC,CAAC;IACDI,EAAE,CAACM,SAAS,GAAIC,KAAK,IAAK;MAAA;MACxB,MAAMC,QAAQ,GAAGJ,IAAI,CAACK,KAAK,CAACF,KAAK,CAACG,IAAI,CAAC;MACvCF,QAAQ,aAARA,QAAQ,4CAARA,QAAQ,CAAEG,OAAO,sDAAjB,kBAAmBC,GAAG,CAAEC,MAAM,IAC5BlB,YAAY,CAAC,CACX,GAAGD,SAAS,EACZ;QAAE,CAACmB,MAAM,CAAC,CAAC,CAAC,GAAGA,MAAM,CAAC,CAAC,CAAC;QAAEC,IAAI,EAAED,MAAM,CAAC,CAAC;MAAE,CAAC,CAC5C,CAAC,CACH;IACH,CAAC;IACDb,EAAE,CAACe,OAAO,GAAG,MAAM;MACjBf,EAAE,CAACgB,KAAK,EAAE;IACZ,CAAC;IAED,OAAO,MAAM;MACXhB,EAAE,CAACgB,KAAK,EAAE;IACZ,CAAC;EACH,CAAC,EAAE,CAACtB,SAAS,CAAC,CAAC;EAEf,oBACE,QAAC,SAAS;IACR,KAAK,EAAE,GAAI;IACX,MAAM,EAAE,GAAI;IACZ,IAAI,EAAEA,SAAU;IAChB,MAAM,EAAE;MACNuB,GAAG,EAAE,CAAC;MACNC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,EAAE;MACRC,MAAM,EAAE;IACV,CAAE;IAAA,wBAEF,QAAC,KAAK;MAAA;MAAA;MAAA;IAAA,QAAG,eACT,QAAC,KAAK;MAAC,IAAI,EAAC,QAAQ;MAAC,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS;IAAE;MAAA;MAAA;MAAA;IAAA,QAAG,eACvD,QAAC,OAAO;MAAA;MAAA;MAAA;IAAA,QAAG,eACX,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG,eACV,QAAC,IAAI;MACH,GAAG,EAAE,KAAM;MACX,YAAY;MACZ,IAAI,EAAC,UAAU;MACf,OAAO,EAAC,KAAK;MACb,MAAM,EAAC;IAAS;MAAA;MAAA;MAAA;IAAA,QAChB,eACF,QAAC,IAAI;MACH,GAAG,EAAE,KAAM;MACX,YAAY;MACZ,IAAI,EAAC,UAAU;MACf,OAAO,EAAC,MAAM;MACd,MAAM,EAAC;IAAS;MAAA;MAAA;MAAA;IAAA,QAChB;EAAA;IAAA;IAAA;IAAA;EAAA,QACQ;AAEhB,CAAC;AAAC,GAhEI3B,SAAS;AAAA,KAATA,SAAS;AAkEf,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}