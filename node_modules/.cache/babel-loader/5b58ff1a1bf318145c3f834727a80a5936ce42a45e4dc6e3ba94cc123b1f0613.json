{"ast":null,"code":"var _jsxFileName = \"/Users/alanschmidt/Work/coin-routes/src/components/OrderBook/OrderBook.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { TableCell, TableContainer, TableHead, TableRow, Table, TableBody } from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport \"./OrderBook.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderBook = _ref => {\n  _s();\n  let {\n    coin\n  } = _ref;\n  const [bids, setBids] = useState([]);\n  const [asks, setAsks] = useState([]);\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [coin],\n      channels: [\"level2_batch\"]\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = event => {\n      var _response$changes;\n      const response = JSON.parse(event.data);\n      response === null || response === void 0 ? void 0 : (_response$changes = response.changes) === null || _response$changes === void 0 ? void 0 : _response$changes.map(change => {\n        change[0] === \"buy\" ? setBids([...bids.slice(0, 5), {\n          price: change[1],\n          size: change[2]\n        }]) : setAsks([...asks.slice(0, 5), {\n          price: change[1],\n          size: change[2]\n        }]);\n        /*         const filtered = bids.filter((bid) => bid.size < 0);\n        console.log(filtered); */\n      });\n    };\n\n    ws.onclose = () => {\n      ws.close();\n    };\n    return () => {\n      ws.close();\n    };\n  }, [bids, asks]);\n  useEffect(() => {\n    setBids([]);\n    setAsks([]);\n  }, [coin]);\n  return /*#__PURE__*/_jsxDEV(TableContainer, {\n    component: Paper,\n    className: \"table--parent\",\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      sx: {\n        minWidth: 400,\n        width: 100\n      },\n      \"aria-label\": \"simple table\",\n      className: \"table--child\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            sx: {\n              width: 100\n            },\n            align: \"right\",\n            children: \"Price (USD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            sx: {\n              width: 200\n            },\n            align: \"right\",\n            children: \"Market Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: bids === null || bids === void 0 ? void 0 : bids.map((bid, index) => {\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            sx: {\n              \"&:last-child td, &:last-child th\": {\n                border: 0\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                color: \"error.main\",\n                width: 100\n              },\n              align: \"right\",\n              children: bid.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: bid.size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      sx: {\n        minWidth: 400,\n        width: 100\n      },\n      \"aria-label\": \"simple table\",\n      className: \"table--child\",\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"right\",\n            children: \"Price (USD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            align: \"right\",\n            children: \"Market Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: asks === null || asks === void 0 ? void 0 : asks.map((asks, index) => {\n          return /*#__PURE__*/_jsxDEV(TableRow, {\n            sx: {\n              \"&:last-child td, &:last-child th\": {\n                border: 0\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              sx: {\n                color: \"success.main\",\n                width: 100\n              },\n              align: \"right\",\n              children: asks.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: asks.size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderBook, \"j4jN73F057JogYLjcSoe8+6ZDyU=\");\n_c = OrderBook;\nexport default OrderBook;\nvar _c;\n$RefreshReg$(_c, \"OrderBook\");","map":{"version":3,"names":["React","useState","useEffect","TableCell","TableContainer","TableHead","TableRow","Table","TableBody","Paper","OrderBook","coin","bids","setBids","asks","setAsks","subscribe","type","product_ids","channels","ws","WebSocket","onopen","send","JSON","stringify","onmessage","event","response","parse","data","changes","map","change","slice","price","size","onclose","close","minWidth","width","bid","index","border","color"],"sources":["/Users/alanschmidt/Work/coin-routes/src/components/OrderBook/OrderBook.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Table,\n  TableBody,\n} from \"@mui/material\";\nimport Paper from \"@mui/material/Paper\";\nimport \"./OrderBook.css\";\n\nconst OrderBook = ({ coin }) => {\n  const [bids, setBids] = useState([]);\n  const [asks, setAsks] = useState([]);\n\n  useEffect(() => {\n    const subscribe = {\n      type: \"subscribe\",\n      product_ids: [coin],\n      channels: [\"level2_batch\"],\n    };\n    const ws = new WebSocket(\"wss://ws-feed.exchange.coinbase.com\");\n\n    ws.onopen = () => {\n      ws.send(JSON.stringify(subscribe));\n    };\n    ws.onmessage = (event) => {\n      const response = JSON.parse(event.data);\n\n      response?.changes?.map((change) => {\n        change[0] === \"buy\"\n          ? setBids([\n              ...bids.slice(0, 5),\n              { price: change[1], size: change[2] },\n            ])\n          : setAsks([\n              ...asks.slice(0, 5),\n              { price: change[1], size: change[2] },\n            ]);\n        /*         const filtered = bids.filter((bid) => bid.size < 0);\n        console.log(filtered); */\n      });\n    };\n    ws.onclose = () => {\n      ws.close();\n    };\n\n    return () => {\n      ws.close();\n    };\n  }, [bids, asks]);\n\n  useEffect(() => {\n    setBids([]);\n    setAsks([]);\n  }, [coin]);\n\n  return (\n    <TableContainer component={Paper} className=\"table--parent\">\n      <Table\n        sx={{ minWidth: 400, width: 100 }}\n        aria-label=\"simple table\"\n        className=\"table--child\"\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell sx={{ width: 100 }} align=\"right\">\n              Price (USD)\n            </TableCell>\n            <TableCell sx={{ width: 200 }} align=\"right\">\n              Market Size\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {bids?.map((bid, index) => {\n            return (\n              <TableRow\n                key={index}\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n              >\n                <TableCell\n                  sx={{ color: \"error.main\", width: 100 }}\n                  align=\"right\"\n                >\n                  {bid.price}\n                </TableCell>\n                <TableCell align=\"right\">{bid.size}</TableCell>\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Table\n        sx={{ minWidth: 400, width: 100 }}\n        aria-label=\"simple table\"\n        className=\"table--child\"\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"right\">Price (USD)</TableCell>\n            <TableCell align=\"right\">Market Size</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {asks?.map((asks, index) => {\n            return (\n              <TableRow\n                key={index}\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n              >\n                <TableCell\n                  sx={{ color: \"success.main\", width: 100 }}\n                  align=\"right\"\n                >\n                  {asks.price}\n                </TableCell>\n                <TableCell align=\"right\">{asks.size}</TableCell>\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default OrderBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}